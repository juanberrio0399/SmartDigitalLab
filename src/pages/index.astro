---
import Papa from 'papaparse';
import fetch from 'node-fetch';

const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/XXXXXX/pub?output=csv'; // Reemplaza con tu link

const res = await fetch(CSV_URL);
const text = await res.text();

const { data } = Papa.parse(text, { header: true });
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Smart Digital Lab</title>
  </head>
  <body class="p-8 font-sans bg-gray-100">
    <h1 class="text-3xl font-bold mb-6">Contenido desde Google Sheets</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {data.map((item) => (
        <div class="bg-white p-4 rounded-lg shadow">
          <img src={`/images/${item.imagen}`} alt={item.titulo} class="w-full h-48 object-cover rounded" />
          <h2 class="text-xl font-semibold mt-2">{item.titulo}</h2>
          <p class="text-sm text-gray-600 mt-1">{item.contenido}</p>
        </div>
      ))}
    </div>
  </body>
</html>
